<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare - Chat Support</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        .chat-container {
            height: calc(100vh - 200px);
            max-height: 600px;
        }
        .message-user {
            background-color: #166534; /* deep olive green */
            color: white;
            border-radius: 12px 12px 0 12px;
            align-self: flex-end;
        }
        .message-bot {
            background-color: #e7e5e4; /* beige/stone */
            color: #292524; /* dark stone text */
            border-radius: 12px 12px 12px 0;
            align-self: flex-start;
        }
        .typing-indicator span {
            animation: typing 1s infinite;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="font-sans antialiased text-stone-800 bg-stone-100">
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i data-feather="heart" class="text-green-800 h-8 w-8"></i>
                        <span class="ml-2 text-xl font-bold text-green-800">MindCare</span>
                    </div>
                </div>
                <div class="hidden md:ml-6 md:flex md:items-center md:space-x-8">
                    <a href="{{ url_for('home') }}" class="text-green-800 border-b-2 border-green-700 px-3 py-2 text-sm font-medium">Home</a>
                    <a href="{{ url_for('resources') }}" class="text-stone-700 hover:text-green-800 px-3 py-2 text-sm font-medium">Resources</a>
                    <a href="{{ url_for('support') }}" class="text-stone-700 hover:text-green-800 px-3 py-2 text-sm font-medium">Peer Support</a>
                    <a href="{{ url_for('booking') }}" class="text-stone-700 hover:text-green-800 px-3 py-2 text-sm font-medium">Book Session</a>
                    <a href="{{ url_for('chat_support') }}" class="text-stone-700 hover:text-green-800 px-3 py-2 text-sm font-medium">Chat Support</a>
                    <div class="relative">
                        <button id="language-toggle" class="text-stone-700 hover:text-green-800 px-3 py-2 text-sm font-medium flex items-center">
                            <i data-feather="globe" class="h-4 w-4 mr-1"></i>
                            English
                            <i id="language-chevron" data-feather="chevron-down" class="h-4 w-4 ml-1"></i>
                        </button>
                        <div id="language-dropdown" class="absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg hidden">
                            <ul>
                                <li><a href="chat-support.html"class="block px-4 py-2 text-sm text-stone-700 hover:bg-stone-100" data-lang="en">English</a></li>
                                <li><a href="chat-support_hi.html"class="block px-4 py-2 text-sm text-stone-700 hover:bg-stone-100" data-lang="hi">हिन्दी</a></li>
                                <li><a href="chat-support_ks.html"class="block px-4 py-2 text-sm text-stone-700 hover:bg-stone-100" data-lang="ks">कश्मीरी</a></li>
                            </ul>
                        </div>
                    </div>
                    <a href="{{ url_for('login') }}" class="bg-green-800 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-900">Login</a>
                </div>
                <div class="-mr-2 flex items-center md:hidden">
                    <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-stone-700 hover:text-green-800 hover:bg-stone-100 focus:outline-none">
                        <i data-feather="menu"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="bg-green-900 text-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:py-16 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-3xl font-extrabold tracking-tight sm:text-4xl lg:text-5xl">
                    Mental Health Chat Support
                </h1>
                <p class="mt-4 max-w-2xl mx-auto text-xl text-stone-200">
                    Confidential, 24/7 support from our AI-powered mental health assistant
                </p>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="bg-white rounded-xl shadow-lg overflow-hidden chat-container flex flex-col">
            <div class="bg-green-800 px-6 py-4">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="bg-green-700 rounded-full p-2">
                            <i data-feather="message-circle" class="h-6 w-6 text-white"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-white">MindCare Assistant</h3>
                        <p class="text-stone-200 text-sm">Always here to listen and help</p>
                    </div>
                    <div class="ml-auto flex items-center">
                        <div class="h-3 w-3 bg-green-400 rounded-full mr-2"></div>
                        <span class="text-stone-200 text-sm">Online</span>
                    </div>
                </div>
            </div>

            <div id="chat-messages" class="flex-1 overflow-y-auto p-6 space-y-4">
                </div>

            <div class="border-t border-stone-200 px-6 py-4">
                <div class="flex">
                    <input 
                        type="text" 
                        id="message-input"
                        placeholder="Type your message here..." 
                        class="flex-1 border border-stone-300 rounded-l-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-700 focus:border-green-700"
                    >
                    <button 
                        id="send-button"
                        class="bg-green-800 text-white px-6 py-3 rounded-r-lg hover:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-offset-2 flex items-center"
                    >
                        <i data-feather="send" class="h-5 w-5"></i>
                    </button>
                </div>
                <p class="text-xs text-stone-500 mt-2 text-center">
                    This is an AI assistant. For crisis situations, please contact emergency services.
                </p>
            </div>
        </div>

        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-green-100 rounded-md p-3">
                        <i data-feather="lock" class="h-6 w-6 text-green-800"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-stone-900">Confidential</h3>
                        <p class="text-stone-500 text-sm">Your conversations are private and secure</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-green-100 rounded-md p-3">
                        <i data-feather="clock" class="h-6 w-6 text-green-800"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-stone-900">Available 24/7</h3>
                        <p class="text-stone-500 text-sm">Get support whenever you need it</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-green-100 rounded-md p-3">
                        <i data-feather="users" class="h-6 w-6 text-green-800"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-stone-900">Human Backup</h3>
                        <p class="text-stone-500 text-sm">Connect with professionals when needed</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-stone-900">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">Services</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-stone-400 hover:text-white">AI Support</a></li>
                        <li><a href="booking.html" class="text-stone-400 hover:text-white">Counseling</a></li>
                        <li><a href="resources.html" class="text-stone-400 hover:text-white">Resources</a></li>
                        <li><a href="support.html" class="text-stone-400 hover:text-white">Peer Support</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">Support</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-stone-400 hover:text-white">Help Center</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Safety</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Privacy</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Accessibility</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">Company</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-stone-400 hover:text-white">About</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Team</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Careers</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">Legal</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-stone-400 hover:text-white">Terms</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Privacy</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Cookies</a></li>
                        <li><a href="#" class="text-stone-400 hover:text-white">Licenses</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-8 border-t border-stone-700 pt-8 md:flex md:items-center md:justify-between">
                <div class="flex space-x-6 md:order-2">
                    <a href="#" class="text-stone-400 hover:text-white"><i data-feather="facebook" class="h-6 w-6"></i></a>
                    <a href="#" class="text-stone-400 hover:text-white"><i data-feather="instagram" class="h-6 w-6"></i></a>
                    <a href="#" class="text-stone-400 hover:text-white"><i data-feather="twitter" class="h-6 w-6"></i></a>
                    <a href="#" class="text-stone-400 hover:text-white"><i data-feather="linkedin" class="h-6 w-6"></i></a>
                </div>
                <p class="mt-8 text-base text-stone-400 md:mt-0 md:order-1">
                    &copy; 2023 MindCare. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize AOS & Feather Icons
        AOS.init({ duration: 800, easing: 'ease-in-out', once: true });
        feather.replace();

        // Language dropdown toggle
        const languageToggle = document.getElementById('language-toggle');
        const languageDropdown = document.getElementById('language-dropdown');
        languageToggle.addEventListener('click', () => {
            languageDropdown.classList.toggle('hidden');
        });
        document.addEventListener('click', (event) => {
            if (!languageToggle.contains(event.target) && !languageDropdown.contains(event.target)) {
                languageDropdown.classList.add('hidden');
            }
        });

        // Chat functionality
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chat-messages');
            const messageInput = document.getElementById('message-input');
            const sendButton = document.getElementById('send-button');

            function addMessage(content, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `flex ${isUser ? 'message-user' : 'message-bot'} max-w-[80%]`;
                messageDiv.innerHTML = `<div class="py-3 px-4">${content}</div>`;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function addSuggestionButtons() {
                 const suggestionsHTML = `
                    <p>I can help with:</p>
                    <div class="mt-2 flex flex-wrap gap-2">
                        <button class="suggestion-btn bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm hover:bg-green-200">Managing stress</button>
                        <button class="suggestion-btn bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm hover:bg-green-200">Sleep issues</button>
                        <button class="suggestion-btn bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm hover:bg-green-200">Anxiety relief</button>
                        <button class="suggestion-btn bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm hover:bg-green-200">Mindfulness</button>
                    </div>`;
                addMessage(suggestionsHTML, false);
                document.querySelectorAll('.suggestion-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        messageInput.value = button.textContent;
                        sendMessage();
                    });
                });
            }

            function showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'flex message-bot max-w-[80%]';
                typingDiv.id = 'typing-indicator';
                typingDiv.innerHTML = `
                    <div class="py-3 px-4">
                        <div class="typing-indicator flex space-x-1">
                            <span class="h-2 w-2 bg-stone-400 rounded-full"></span>
                            <span class="h-2 w-2 bg-stone-400 rounded-full"></span>
                            <span class="h-2 w-2 bg-stone-400 rounded-full"></span>
                        </div>
                    </div>`;
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function hideTypingIndicator() {
                const typingIndicator = document.getElementById('typing-indicator');
                if (typingIndicator) typingIndicator.remove();
            }

            function getBotResponse(userMessage) {
                return `I understand you're saying: "${userMessage}". As an AI assistant, I'm here to listen and provide support. If you're in crisis, please reach out to a human counselor or emergency services.`;
            }

            function sendMessage() {
                const message = messageInput.value.trim();
                if (message) {
                    addMessage(`<p>${message}</p>`, true);
                    messageInput.value = '';
                    showTypingIndicator();
                    setTimeout(() => {
                        hideTypingIndicator();
                        const botResponse = getBotResponse(message);
                        addMessage(`<p>${botResponse}</p>`, false);
                    }, 1500);
                }
            }

            // Event listeners
            sendButton.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });

            // Initialize chat
            addMessage("<p>Hello! I'm your MindCare assistant. I'm here to provide support and guidance whenever you need it. How are you feeling today?</p>", false);
            setTimeout(addSuggestionButtons, 500);
        });
    </script>
</body>
</html>