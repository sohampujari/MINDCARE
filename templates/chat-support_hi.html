<!DOCTYPE html>
<html lang="Hindi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare - चैट सहायता</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="/static/css/theme.css">
    <style>
        .chat-container {
            height: calc(100vh - 200px);
            max-height: 600px;
        }
        .message-user {
            background-color: #667eea;
            color: white;
            border-radius: 12px 12px 0 12px;
            align-self: flex-end;
        }
        .message-bot {
            background-color: #f1f5f9;
            color: #334155;
            border-radius: 12px 12px 12px 0;
            align-self: flex-start;
        }
        .typing-indicator span {
            animation: typing 1s infinite;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i data-feather="heart" class="text-green-800 h-8 w-8"></i>
                        <span class="ml-2 text-xl font-bold text-green-800">MindCare</span>
                    </div>
                </div>
                <div class="hidden md:ml-6 md:flex md:items-center md:space-x-8">
                    <a href="{{ url_for('home_lang', lang='hi') }}" class="text-gray-700 hover:text-green-800 px-3 py-2 text-sm font-medium">होम</a>
                    <a href="{{ url_for('resources_lang', lang='hi') }}" class="text-gray-700 hover:text-green-800 px-3 py-2 text-sm font-medium">साधन</a>
                    <a href="{{ url_for('support_lang', lang='hi') }}" class="text-gray-700 hover:text-green-800 px-3 py-2 text-sm font-medium">सहकर्मी सहायता</a>
                    <a href="{{ url_for('booking') }}" class="text-gray-700 hover:text-green-800 px-3 py-2 text-sm font-medium">सत्र बुक करें</a>
                    <a href="{{ url_for('chat_support_lang', lang='hi') }}" class="text-green-800 border-b-2 border-indigo-500 px-3 py-2 text-sm font-medium">चैट समर्थन</a>
                    <div class="relative">
                        <button id="language-toggle" class="text-gray-700 hover:text-green-800 px-3 py-2 text-sm font-medium flex items-center">
                            <i data-feather="globe" class="h-4 w-4 mr-1"></i>
                            हिंदी
                            <i id="language-chevron" data-feather="chevron-down" class="h-4 w-4 ml-1"></i>
                        </button>
                        <div id="language-dropdown" class="absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg hidden">
                            <ul>
                                <li><a href="{{ url_for('chat_support') }}" class="block px-4 py-2 text-sm text-stone-700 hover:bg-stone-100">English</a></li>
                                <li><a href="{{ url_for('chat_support_lang', lang='hi') }}" class="block px-4 py-2 text-sm text-stone-700 hover:bg-stone-100">हिन्दी</a></li>
                                <li><a href="{{ url_for('chat_support_lang', lang='ks') }}" class="block px-4 py-2 text-sm text-stone-700 hover:bg-stone-100">कश्मीरी</a></li>
                            </ul>
                        </div>
                    </div>
                         <a href="{{ url_for('login') }}" class="bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-900">लॉगिन</a>
                </div>
                <div class="-mr-2 flex items-center md:hidden">
                    <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-green-800 hover:bg-gray-100 focus:outline-none">
                        <i data-feather="menu"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="bg-green-900 text-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:py-16 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-3xl font-extrabold tracking-tight sm:text-4xl lg:text-5xl">
                    मानसिक स्वास्थ्य चैट सहायता
                </h1>
                <p class="mt-4 max-w-2xl mx-auto text-xl">
                    हमारे AI-संचालित मानसिक स्वास्थ्य सहायक से गोपनीय, 24/7 सहायता प्राप्त करें।
                </p>
            </div>
        </div>
    </div>

    <!-- Chat Interface -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="bg-white rounded-xl shadow-lg overflow-hidden chat-container flex flex-col">
            <!-- Chat Header -->
            <div class="bg-indigo-600 px-6 py-4">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="bg-indigo-500 rounded-full p-2">
                            <i data-feather="message-circle" class="h-6 w-6 text-white"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-white">MindCare सहायक</h3>
                        <p class="text-indigo-200 text-sm">हमेशा सुनने और मदद करने के लिए यहाँ।</p>
                    </div>
                    <div class="ml-auto flex items-center">
                        <div class="h-3 w-3 bg-green-400 rounded-full mr-2"></div>
                        <span class="text-indigo-200 text-sm">ऑनलाइन</span>
                    </div>
                </div>
            </div>

            <!-- Chat Messages -->
            <div id="chat-messages" class="flex-1 overflow-y-auto p-6 space-y-4">
                <!-- Welcome Message -->
                <div class="flex message-bot max-w-[80%]">
                    <div class="py-3 px-4">
                        <p>नमस्ते! मैं आपका MindCare सहायक हूँ। मैं यहाँ आपकी मदद और मार्गदर्शन के लिए हूँ, जब भी आपको आवश्यकता हो। आप आज कैसा महसूस कर रहे हैं?</p>
                    </div>
                </div>

                <!-- Suggestion Buttons -->
                <div class="flex message-bot max-w-[80%]">
                    <div class="py-3 px-4">
                        <p>मैं निम्नलिखित में मदद कर सकता हूँ:</p>
                        <div class="mt-2 flex flex-wrap gap-2">
                            <button class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200 suggestion-btn">तनाव प्रबंधन</button>
                            <button class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200 suggestion-btn">नींद से जुड़ी समस्याएँ</button>
                            <button class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200 suggestion-btn">चिंता से राहत</button>
                            <button class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200 suggestion-btn">सजगता</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="border-t border-gray-200 px-6 py-4">
                <div class="flex">
                    <input 
                        type="text" 
                        id="message-input"
                        placeholder="Type your message here..." 
                        class="flex-1 border border-gray-300 rounded-l-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                    >
                    <button 
                        id="send-button"
                        class="bg-indigo-600 text-white px-6 py-3 rounded-r-lg hover:bg-green-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center"
                    >
                        <i data-feather="send" class="h-5 w-5"></i>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-2 text-center">
                   यह एक AI सहायक है। संकट की स्थिति में, कृपया आपातकालीन सेवाओं से संपर्क करें।
                </p>
            </div>
        </div>

        <!-- Additional Info -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-indigo-100 rounded-md p-3">
                        <i data-feather="lock" class="h-6 w-6 text-green-800"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-gray-900">गोपनीय</h3>
                        <p class="text-gray-500 text-sm">आपकी बातचीत निजी और सुरक्षित है।</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-indigo-100 rounded-md p-3">
                        <i data-feather="clock" class="h-6 w-6 text-green-800"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-gray-900">24/7 उपलब्ध</h3>
                        <p class="text-gray-500 text-sm">जब भी आपको जरूरत हो, सहायता प्राप्त करें।</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-indigo-100 rounded-md p-3">
                        <i data-feather="users" class="h-6 w-6 text-green-800"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-gray-900">मानव बैकअप</h3>
                        <p class="text-gray-500 text-sm">जब आवश्यक हो, पेशेवरों से जुड़ें।</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">सेवाएँ</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-gray-400 hover:text-white">AI सहायता</a></li>
                        <li><a href="booking.html" class="text-gray-400 hover:text-white">काउंसलिंग</a></li>
                        <li><a href="resources.html" class="text-gray-400 hover:text-white">संसाधन</a></li>
                        <li><a href="support.html" class="text-gray-400 hover:text-white">सहकर्मी सहायता</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">सहायता</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-gray-400 hover:text-white">सहायता केंद्र</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">सुरक्षा</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">गोपनीयता</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">सुगम्यता</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">कंपनी</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-gray-400 hover:text-white">के बारे में</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">टीम</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">कैरियर</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">संपर्क करें</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-sm font-semibold tracking-wider uppercase">कानूनी</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-gray-400 hover:text-white">शर्तें</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">गोपनीयता</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">कुकीज़</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">लाइसेंस</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-700 pt-8 md:flex md:items-center md:justify-between">
                <div class="flex space-x-6 md:order-2">
                    <a href="#" class="text-gray-400 hover:text-white">
                        <i data-feather="facebook" class="h-6 w-6"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white">
                        <i data-feather="instagram" class="h-6 w-6"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white">
                        <i data-feather="twitter" class="h-6 w-6"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white">
                        <i data-feather="linkedin" class="h-6 w-6"></i>
                    </a>
                </div>
                <p class="mt-8 text-base text-gray-400 md:mt-0 md:order-1">
                    &copy; 2023 MindCare. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });

        // Language dropdown toggle
        const languageToggle = document.getElementById('language-toggle');
        const languageDropdown = document.getElementById('language-dropdown');
        const languageChevron = document.getElementById('language-chevron');

        languageToggle.addEventListener('click', function() {
            languageDropdown.classList.toggle('hidden');
            const isHidden = languageDropdown.classList.contains('hidden');
            feather.replace();
            if (isHidden) {
                languageChevron.setAttribute('data-feather', 'chevron-down');
            } else {
                languageChevron.setAttribute('data-feather', 'chevron-up');
            }
            feather.replace();
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!languageToggle.contains(event.target) && !languageDropdown.contains(event.target)) {
                languageDropdown.classList.add('hidden');
                languageChevron.setAttribute('data-feather', 'chevron-down');
                feather.replace();
            }
        });

        // Replace Feather icons
        feather.replace();

        // Chat functionality
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chat-messages');
            const messageInput = document.getElementById('message-input');
            const sendButton = document.getElementById('send-button');

            // Function to add a message to the chat
            function addMessage(text, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `flex ${isUser ? 'message-user' : 'message-bot'} max-w-[80%]`;
                messageDiv.innerHTML = `<div class="py-3 px-4"><p>${text}</p></div>`;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Function to show typing indicator
            function showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'flex message-bot max-w-[80%]';
                typingDiv.id = 'typing-indicator';
                typingDiv.innerHTML = `
                    <div class="py-3 px-4">
                        <div class="typing-indicator flex space-x-1">
                            <span class="h-2 w-2 bg-gray-400 rounded-full"></span>
                            <span class="h-2 w-2 bg-gray-400 rounded-full"></span>
                            <span class="h-2 w-2 bg-gray-400 rounded-full"></span>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Function to hide typing indicator
            function hideTypingIndicator() {
                const typingIndicator = document.getElementById('typing-indicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }

            // Function to simulate bot response
            function getBotResponse(userMessage) {
                // This is where you would integrate your actual chatbot API
                // For now, we'll return a generic response
                return "I understand you're saying: \"" + userMessage + "\". As an AI assistant, I'm here to listen and provide support. If you're in crisis, please reach out to a human counselor or emergency services.";
            }

            // Send message function
            function sendMessage() {
                const message = messageInput.value.trim();
                if (message) {
                    // Add user message
                    addMessage(message, true);
                    messageInput.value = '';

                    // Show typing indicator
                    showTypingIndicator();

                    // Simulate bot thinking
                    setTimeout(() => {
                        hideTypingIndicator();
                        // Add bot response
                        const botResponse = getBotResponse(message);
                        addMessage(botResponse, false);
                    }, 1500);
                }
            }

            // Event listeners
            sendButton.addEventListener('click', sendMessage);

            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Add event listeners to suggestion buttons
            document.querySelectorAll('.suggestion-btn').forEach(button => {
                button.addEventListener('click', () => {
                    messageInput.value = button.textContent;
                    sendMessage();
                });
            });

            // Initialize with welcome messages
            addMessage("Hello! I'm your MindCare assistant. I'm here to provide support and guidance whenever you need it. How are you feeling today?", false);
            
            setTimeout(() => {
                addMessage("I can help with:", false);
                
                const suggestionsDiv = document.createElement('div');
                suggestionsDiv.className = 'flex message-bot max-w-[80%]';
                suggestionsDiv.innerHTML = `
                    <div class="py-3 px-4">
                        <p>I can help with:</p>
                        <div class="mt-2 flex flex-wrap gap-2">
                            <button class="suggestion-btn bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200">Managing stress</button>
                            <button class="suggestion-btn bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200">Sleep issues</button>
                            <button class="suggestion-btn bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200">Anxiety relief</button>
                            <button class="suggestion-btn bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm hover:bg-indigo-200">Mindfulness</button>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(suggestionsDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 500);
        });
    </script>
</body>
</html>